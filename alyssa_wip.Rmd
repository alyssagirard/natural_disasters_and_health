---
title: "placeholder report"
author: "Alyssa Girard"
date: "2025-11-19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE,
                      warning = FALSE)
library(tidyverse)
library(here)
```


https://ourworldindata.org/grapher/number-homeless-from-natural-disasters?tab=table

## What disasters cause the most deaths?
 
```{r}
# import data
deaths <- read_csv(here("data/number-of-deaths-by-disaster.csv"))

deaths_usa <- deaths %>%
  filter(Entity == "United States") %>%
  select(Year,
         `Deaths - Flood`,
         `Deaths - Earthquake`,
         `Deaths - Extreme weather`)

long_data <- deaths_usa %>%
  pivot_longer(cols = -Year, names_to = "Disaster", values_to = "Deaths") %>%
  mutate(Deaths = ifelse(is.na(Deaths), 0, Deaths))

total_data <- long_data %>%
  group_by(Disaster) %>%
  summarise(Total_Deaths = sum(Deaths))

ggplot(total_data, aes(
  area = Total_Deaths,
  fill = Disaster,
  label = paste0(Disaster, "\n", Total_Deaths)
)) +
  geom_treemap() +
  geom_treemap_text(
    colour = "white",
    place = "centre",
    grow = TRUE
  ) +
  scale_fill_manual(values = c(
    "Deaths - Flood" = "blue",
    "Deaths - Earthquake" = "red",
    "Deaths - Extreme weather" = "orange"
  )) +
  labs(title = "Total Deaths by Disaster Type") +
  theme(legend.position = "none")
```
- The relationship we are investigating is the relationship between natural disasters and death, specifically extreme weather, floods, and wildfire disasters. The visualization does provide evidence as it shows there have been a large amount of deaths due to natural disasters in the United States, specifically extreme weather causing the largest amount, earthquakes causing the second largest, and floods last of the three.
### What disasters cause the highest rates of homelessness?
```{r}
homeless <- read_csv(here("data/number-homeless-from-natural-disasters.csv"))

three_types <- homeless %>%
  group_by(Entity) %>%
  summarise(total_homeless = sum(Homeless, na.rm = TRUE)) %>%
  filter(Entity %in% c("Extreme weather", "Flood", "Wildfire"))

all_disasters <- homeless %>%
  group_by(Entity) %>%
  summarise(total_homeless = sum(Homeless, na.rm = TRUE)) %>%
  filter(Entity == "All disasters")

ggplot(data = three_types,
       aes(x = Entity, y = total_homeless / 1000))+
  geom_bar(stat = "identity", fill = "blue") +
  geom_text(aes(label = total_homeless/10000, vjust = -0.5, size = 1)) +
  scale_y_continuous(limits = c(0, 125000)) +
  labs(title = "",
       x = "Type of Disaster",
       y = " (in tens of thousands)")
```
percent version
```{r}
library(dplyr)
# create vars
three_types <- homeless %>%
  group_by(Entity) %>%
  summarise(total_homeless = sum(Homeless, na.rm = TRUE)) %>%
  filter(Entity %in% c("Extreme weather", "Flood", "Wildfire"))

all_disasters <- homeless %>%
  group_by(Entity) %>%
  summarise(total_homeless = sum(Homeless, na.rm = TRUE)) %>%
  filter(Entity == "All disasters")

three_types <- three_types %>%
  mutate(pct = round((total_homeless / all_disasters$total_homeless) * 100), 4)

ggplot(data = three_types,
       aes(x = Entity, y = pct))+
  geom_bar(stat = "identity", fill = "blue") +
  geom_text(aes(label = pct, vjust = -0.5, size = 0.2)) +
  scale_y_continuous(limits = c(0, 100)) +
  labs(title = "",
       x = "Type of Disaster",
       y = " (in tens of thousands)")
```
 
 
